<?xml version="1.0"?>
<launch>
  <arg name="robot_description" default="$(find-pkg-share snp_support)/urdf/workcell.xacro"/>
  <arg name="robot_description_semantic" default="$(find-pkg-share snp_support)/config/workcell.srdf"/>
  <arg name="use_gui" default="true"/>
  <arg name="rviz_config" default="$(find-pkg-share snp_support)/config/rviz_base_config.rviz"/>

  <!-- Load universal robot description format (URDF) -->
  <let name="_robot_description" value="$(command 'xacro $(var robot_description)')" />

  <!-- The semantic description that corresponds to the URDF -->
  <let name="_robot_description_semantic" value="$(command 'cat $(var robot_description_semantic)')" />

  <node pkg="joint_state_publisher" exec="joint_state_publisher">
    <param name="source_list" value="[robot_joint_states]"/>
  </node>

  <group if="$(var use_gui)">
    <node pkg="joint_state_publisher_gui" exec="joint_state_publisher_gui" name="joint_state_publisher_gui" output="screen">
      <remap from="/joint_states" to="/robot_joint_states"/>
    </node>
  </group>

  <node pkg="robot_state_publisher" exec="robot_state_publisher" output="screen">
    <param name="robot_description" value="$(var _robot_description)"/>
  </node>

  <node pkg="rviz2" exec="rviz2" args="-d $(var rviz_config)">
    <param name="robot_description" value="$(var _robot_description)"/>
    <param name="robot_description_semantic" value="$(var _robot_description_semantic)"/>
  </node>

</launch>
